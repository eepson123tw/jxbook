import{b as tt,d as et,w as y}from"./iframe.24ee6969.js";var H;function nt(n,e){return e||(e=n.slice(0)),Object.freeze(Object.defineProperties(n,{raw:{value:Object.freeze(e)}}))}function rt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function M(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function at(n,e,t){return e&&M(n.prototype,e),t&&M(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}var it=function(){return Math.random().toString(16).slice(2)},st=function(){function n(){var e=this,t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.transport,a=t.async,i=a===void 0?!1:a;rt(this,n),this.isAsync=void 0,this.sender=it(),this.events={},this.data={},this.transport=void 0,this.addPeerListener=tt(function(l,c){e.addListener(l,c)},et(H||(H=nt([`
      channel.addPeerListener is deprecated
    `])))),this.isAsync=i,r&&(this.transport=r,this.transport.setHandler(function(l){return e.handleEvent(l)}))}return at(n,[{key:"hasTransport",get:function(){return!!this.transport}},{key:"addListener",value:function(t,r){this.events[t]=this.events[t]||[],this.events[t].push(r)}},{key:"emit",value:function(t){for(var r=this,a=arguments.length,i=new Array(a>1?a-1:0),l=1;l<a;l++)i[l-1]=arguments[l];var c={type:t,args:i,from:this.sender},f={};i.length>=1&&i[0]&&i[0].options&&(f=i[0].options);var u=function(){r.transport&&r.transport.send(c,f),r.handleEvent(c)};this.isAsync?setImmediate(u):u()}},{key:"last",value:function(t){return this.data[t]}},{key:"eventNames",value:function(){return Object.keys(this.events)}},{key:"listenerCount",value:function(t){var r=this.listeners(t);return r?r.length:0}},{key:"listeners",value:function(t){var r=this.events[t];return r||void 0}},{key:"once",value:function(t,r){var a=this.onceListener(t,r);this.addListener(t,a)}},{key:"removeAllListeners",value:function(t){t?this.events[t]&&delete this.events[t]:this.events={}}},{key:"removeListener",value:function(t,r){var a=this.listeners(t);a&&(this.events[t]=a.filter(function(i){return i!==r}))}},{key:"on",value:function(t,r){this.addListener(t,r)}},{key:"off",value:function(t,r){this.removeListener(t,r)}},{key:"handleEvent",value:function(t){var r=this.listeners(t.type);r&&r.length&&r.forEach(function(a){a.apply(t,t.args)}),this.data[t.type]=t.args}},{key:"onceListener",value:function(t,r){var a=this,i=function l(){return a.removeListener(t,l),r.apply(void 0,arguments)};return i}}]),n}(),ot=st,ut=y.LOGLEVEL,m=y.console,A={trace:1,debug:2,info:3,warn:4,error:5,silent:10},lt=ut,C=A[lt]||A.info,Y={trace:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<=A.trace&&m.trace.apply(m,[e].concat(r))},debug:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<=A.debug&&m.debug.apply(m,[e].concat(r))},info:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<=A.info&&m.info.apply(m,[e].concat(r))},warn:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<=A.warn&&m.warn.apply(m,[e].concat(r))},error:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<=A.error&&m.error.apply(m,[e].concat(r))},log:function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];return C<A.silent&&m.log.apply(m,[e].concat(r))}},G=new Set,p=function(e){return function(t){if(!G.has(t)){G.add(t);for(var r=arguments.length,a=new Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];return Y[e].apply(Y,[t].concat(a))}}};p.clear=function(){return G.clear()};p.trace=p("trace");p.debug=p("debug");p.info=p("info");p.warn=p("warn");p.error=p("error");p.log=p("log");function ct(){var n={setHandler:function(){},send:function(){}};return new ot({transport:n})}var x;(function(n){n.TAB="tab",n.PANEL="panel",n.TOOL="tool",n.TOOLEXTRA="toolextra",n.PREVIEW="preview",n.NOTES_ELEMENT="notes-element"})(x||(x={}));function k(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function ft(n,e,t){return e&&k(n.prototype,e),t&&k(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function dt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var ht=ft(function n(){var e=this;dt(this,n),this.loaders={},this.elements={},this.config={},this.channel=void 0,this.serverChannel=void 0,this.promise=void 0,this.resolve=void 0,this.getChannel=function(){return e.channel||e.setChannel(ct()),e.channel},this.getServerChannel=function(){if(!e.serverChannel)throw new Error("Accessing non-existent serverChannel");return e.serverChannel},this.ready=function(){return e.promise},this.hasChannel=function(){return!!e.channel},this.hasServerChannel=function(){return!!e.serverChannel},this.setChannel=function(t){e.channel=t,e.resolve()},this.setServerChannel=function(t){e.serverChannel=t},this.getElements=function(t){return e.elements[t]||(e.elements[t]={}),e.elements[t]},this.addPanel=function(t,r){e.add(t,Object.assign({type:x.PANEL},r))},this.add=function(t,r){var a=r.type,i=e.getElements(a);i[t]=Object.assign({id:t},r)},this.setConfig=function(t){Object.assign(e.config,t)},this.getConfig=function(){return e.config},this.register=function(t,r){e.loaders[t]&&Y.warn("".concat(t," was loaded twice, this could have bad side-effects")),e.loaders[t]=r},this.loadAddons=function(t){Object.values(e.loaders).forEach(function(r){return r(t)})},this.promise=new Promise(function(t){e.resolve=function(){return t(e.getChannel())}})}),L="__STORYBOOK_ADDONS";function vt(){return y[L]||(y[L]=new ht),y[L]}var gt=vt(),g;(function(n){n.CHANNEL_CREATED="channelCreated",n.CONFIG_ERROR="configError",n.STORY_INDEX_INVALIDATED="storyIndexInvalidated",n.STORY_SPECIFIED="storySpecified",n.SET_STORIES="setStories",n.SET_CURRENT_STORY="setCurrentStory",n.CURRENT_STORY_WAS_SET="currentStoryWasSet",n.FORCE_RE_RENDER="forceReRender",n.FORCE_REMOUNT="forceRemount",n.PRELOAD_STORIES="preloadStories",n.STORY_PREPARED="storyPrepared",n.STORY_CHANGED="storyChanged",n.STORY_UNCHANGED="storyUnchanged",n.STORY_RENDERED="storyRendered",n.STORY_MISSING="storyMissing",n.STORY_ERRORED="storyErrored",n.STORY_THREW_EXCEPTION="storyThrewException",n.STORY_RENDER_PHASE_CHANGED="storyRenderPhaseChanged",n.UPDATE_STORY_ARGS="updateStoryArgs",n.STORY_ARGS_UPDATED="storyArgsUpdated",n.RESET_STORY_ARGS="resetStoryArgs",n.SET_GLOBALS="setGlobals",n.UPDATE_GLOBALS="updateGlobals",n.GLOBALS_UPDATED="globalsUpdated",n.REGISTER_SUBSCRIPTION="registerSubscription",n.PREVIEW_KEYDOWN="previewKeydown",n.SELECT_STORY="selectStory",n.STORIES_COLLAPSE_ALL="storiesCollapseAll",n.STORIES_EXPAND_ALL="storiesExpandAll",n.DOCS_RENDERED="docsRendered",n.SHARED_STATE_CHANGED="sharedStateChanged",n.SHARED_STATE_SET="sharedStateSet",n.NAVIGATE_URL="navigateUrl",n.UPDATE_QUERY_PARAMS="updateQueryParams"})(g||(g={}));g.CHANNEL_CREATED;g.CONFIG_ERROR;g.STORY_INDEX_INVALIDATED;g.STORY_SPECIFIED;g.SET_STORIES;var St=g.SET_CURRENT_STORY;g.CURRENT_STORY_WAS_SET;g.FORCE_RE_RENDER;var W=g.FORCE_REMOUNT;g.STORY_PREPARED;g.STORY_CHANGED;g.STORY_UNCHANGED;g.PRELOAD_STORIES;g.STORY_RENDERED;g.STORY_MISSING;g.STORY_ERRORED;g.STORY_THREW_EXCEPTION;var Et=g.STORY_RENDER_PHASE_CHANGED;g.UPDATE_STORY_ARGS;g.STORY_ARGS_UPDATED;g.RESET_STORY_ARGS;g.SET_GLOBALS;g.UPDATE_GLOBALS;g.GLOBALS_UPDATED;g.REGISTER_SUBSCRIPTION;g.PREVIEW_KEYDOWN;g.SELECT_STORY;g.STORIES_COLLAPSE_ALL;g.STORIES_EXPAND_ALL;g.DOCS_RENDERED;g.SHARED_STATE_CHANGED;g.SHARED_STATE_SET;g.NAVIGATE_URL;g.UPDATE_QUERY_PARAMS;var _t=new Error("ignoredException"),T;(function(n){n.DONE="done",n.ERROR="error",n.ACTIVE="active",n.WAITING="waiting"})(T||(T={}));var P;function N(n){return N=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},N(n)}function yt(n,e){if(n==null)return{};var t=Rt(n,e),r,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);for(a=0;a<i.length;a++)r=i[a],!(e.indexOf(r)>=0)&&(!Object.prototype.propertyIsEnumerable.call(n,r)||(t[r]=n[r]))}return t}function Rt(n,e){if(n==null)return{};var t={},r=Object.keys(n),a,i;for(i=0;i<r.length;i++)a=r[i],!(e.indexOf(a)>=0)&&(t[a]=n[a]);return t}function Ot(n){var e=pt(n,"string");return N(e)==="symbol"?e:String(e)}function pt(n,e){if(N(n)!=="object"||n===null)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e||"default");if(N(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function D(n){return mt(n)||It(n)||q(n)||Tt()}function Tt(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function It(n){if(typeof Symbol!="undefined"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function mt(n){if(Array.isArray(n))return B(n)}function U(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bt(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function K(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function At(n,e,t){return e&&K(n.prototype,e),t&&K(n,t),Object.defineProperty(n,"prototype",{writable:!1}),n}function Q(n,e){return Nt(n)||Ct(n,e)||q(n,e)||wt()}function wt(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q(n,e){if(!!n){if(typeof n=="string")return B(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return B(n,e)}}function B(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=new Array(e);t<e;t++)r[t]=n[t];return r}function Ct(n,e){var t=n==null?null:typeof Symbol!="undefined"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r=[],a=!0,i=!1,l,c;try{for(t=t.call(n);!(a=(l=t.next()).done)&&(r.push(l.value),!(e&&r.length===e));a=!0);}catch(f){i=!0,c=f}finally{try{!a&&t.return!=null&&t.return()}finally{if(i)throw c}}return r}}function Nt(n){if(Array.isArray(n))return n}var b={CALL:"instrumenter/call",SYNC:"instrumenter/sync",START:"instrumenter/start",BACK:"instrumenter/back",GOTO:"instrumenter/goto",NEXT:"instrumenter/next",END:"instrumenter/end"},J=((P=y.FEATURES)===null||P===void 0?void 0:P.interactionsDebugger)!==!0,V={debugger:!J,start:!1,back:!1,goto:!1,next:!1,end:!1},F=new Error("This function ran after the play function completed. Did you forget to `await` it?"),X=function(e){return Object.prototype.toString.call(e)==="[object Object]"},Dt=function(e){return Object.prototype.toString.call(e)==="[object Module]"},Lt=function(e){if(!X(e)&&!Dt(e))return!1;if(e.constructor===void 0)return!0;var t=e.constructor.prototype;return!(!X(t)||Object.prototype.hasOwnProperty.call(t,"isPrototypeOf")===!1)},Pt=function(e){try{return new e.constructor}catch{return{}}},j=function(){return{renderPhase:void 0,isDebugging:!1,isPlaying:!1,isLocked:!1,cursor:0,calls:[],shadowCalls:[],callRefsByResult:new Map,chainedCallIds:new Set,parentId:void 0,playUntil:void 0,resolvers:{},syncTimeout:void 0,forwardedException:void 0}},z=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=(t?e.shadowCalls:e.calls).filter(function(i){return i.retain});if(!!r.length){var a=new Map(Array.from(e.callRefsByResult.entries()).filter(function(i){var l=Q(i,2),c=l[1];return c.retain}));return{cursor:r.length,calls:r,callRefsByResult:a}}},Ut=function(){function n(){var e=this;bt(this,n),this.channel=void 0,this.initialized=!1,this.state=void 0,this.channel=gt.getChannel(),this.state=y.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__||{};var t=function(u){var s=u.storyId,d=u.isPlaying,S=d===void 0?!0:d,v=u.isDebugging,o=v===void 0?!1:v,h=e.getState(s);e.setState(s,Object.assign({},j(),z(h,o),{shadowCalls:o?h.shadowCalls:[],chainedCallIds:o?h.chainedCallIds:new Set,playUntil:o?h.playUntil:void 0,isPlaying:S,isDebugging:o})),o||e.sync(s)};this.channel.on(W,t),this.channel.on(Et,function(f){var u=f.storyId,s=f.newPhase,d=e.getState(u),S=d.isDebugging,v=d.forwardedException;if(e.setState(u,{renderPhase:s}),s==="playing"&&t({storyId:u,isDebugging:S}),s==="played"&&(e.setState(u,{isLocked:!1,isPlaying:!1,isDebugging:!1,forwardedException:void 0}),v))throw v}),this.channel.on(St,function(){e.initialized?e.cleanup():e.initialized=!0});var r=function(u){var s=u.storyId,d=u.playUntil;e.getState(s).isDebugging||e.setState(s,function(v){var o=v.calls;return{calls:[],shadowCalls:o.map(function(h){return Object.assign({},h,{status:T.WAITING})}),isDebugging:!0}});var S=e.getLog(s);e.setState(s,function(v){var o,h=v.shadowCalls,_=h.findIndex(function(E){return E.id===S[0].callId});return{playUntil:d||((o=h.slice(0,_).filter(function(E){return E.interceptable}).slice(-1)[0])===null||o===void 0?void 0:o.id)}}),e.channel.emit(W,{storyId:s,isDebugging:!0})},a=function(u){var s,d=u.storyId,S=e.getState(d),v=S.isDebugging,o=e.getLog(d),h=v?o.findIndex(function(_){var E=_.status;return E===T.WAITING}):o.length;r({storyId:d,playUntil:(s=o[h-2])===null||s===void 0?void 0:s.callId})},i=function(u){var s=u.storyId,d=u.callId,S=e.getState(s),v=S.calls,o=S.shadowCalls,h=S.resolvers,_=v.find(function(O){var w=O.id;return w===d}),E=o.find(function(O){var w=O.id;return w===d});if(!_&&E&&Object.values(h).length>0){var R,I=(R=e.getLog(s).find(function(O){return O.status===T.WAITING}))===null||R===void 0?void 0:R.callId;E.id!==I&&e.setState(s,{playUntil:E.id}),Object.values(h).forEach(function(O){return O()})}else r({storyId:s,playUntil:d})},l=function(u){var s=u.storyId,d=e.getState(s),S=d.resolvers;if(Object.values(S).length>0)Object.values(S).forEach(function(h){return h()});else{var v,o=(v=e.getLog(s).find(function(h){return h.status===T.WAITING}))===null||v===void 0?void 0:v.callId;o?r({storyId:s,playUntil:o}):c({storyId:s})}},c=function(u){var s=u.storyId;e.setState(s,{playUntil:void 0,isDebugging:!1}),Object.values(e.getState(s).resolvers).forEach(function(d){return d()})};this.channel.on(b.START,r),this.channel.on(b.BACK,a),this.channel.on(b.GOTO,i),this.channel.on(b.NEXT,l),this.channel.on(b.END,c)}return At(n,[{key:"getState",value:function(t){return this.state[t]||j()}},{key:"setState",value:function(t,r){var a=this.getState(t),i=typeof r=="function"?r(a):r;this.state=Object.assign({},this.state,U({},t,Object.assign({},a,i))),y.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}},{key:"cleanup",value:function(){this.state=Object.entries(this.state).reduce(function(t,r){var a=Q(r,2),i=a[0],l=a[1],c=z(l);return c&&(t[i]=Object.assign(j(),c)),t},{}),this.channel.emit(b.SYNC,{controlStates:V,logItems:[]}),y.window.parent.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER_STATE__=this.state}},{key:"getLog",value:function(t){var r=this.getState(t),a=r.calls,i=r.shadowCalls,l=D(i);a.forEach(function(f,u){l[u]=f});var c=new Set;return l.reduceRight(function(f,u){return u.args.forEach(function(s){s!=null&&s.__callId__&&c.add(s.__callId__)}),u.path.forEach(function(s){s.__callId__&&c.add(s.__callId__)}),u.interceptable&&!c.has(u.id)&&(f.unshift({callId:u.id,status:u.status}),c.add(u.id)),f},[])}},{key:"instrument",value:function(t,r){var a=this;if(!Lt(t))return t;var i=r.mutate,l=i===void 0?!1:i,c=r.path,f=c===void 0?[]:c;return Object.keys(t).reduce(function(u,s){var d=t[s];return typeof d!="function"?(u[s]=a.instrument(d,Object.assign({},r,{path:f.concat(s)})),u):typeof d.__originalFn__=="function"?(u[s]=d,u):(u[s]=function(){for(var S=arguments.length,v=new Array(S),o=0;o<S;o++)v[o]=arguments[o];return a.track(s,d,v,r)},u[s].__originalFn__=d,Object.defineProperty(u[s],"name",{value:s,writable:!1}),Object.keys(d).length>0&&Object.assign(u[s],a.instrument(Object.assign({},d),Object.assign({},r,{path:f.concat(s)}))),u)},l?t:Pt(t))}},{key:"track",value:function(t,r,a,i){var l,c,f,u,s=(a==null||(l=a[0])===null||l===void 0?void 0:l.__storyId__)||((c=y.window.__STORYBOOK_PREVIEW__)===null||c===void 0||(f=c.urlStore)===null||f===void 0||(u=f.selection)===null||u===void 0?void 0:u.storyId),d=this.getState(s),S=d.cursor,v=d.parentId;this.setState(s,{cursor:S+1});var o="".concat(v||s," [").concat(S,"] ").concat(t),h=i.path,_=h===void 0?[]:h,E=i.intercept,R=E===void 0?!1:E,I=i.retain,O=I===void 0?!1:I,w=typeof R=="function"?R(t,_):R,$={id:o,parentId:v,storyId:s,cursor:S,path:_,method:t,args:a,interceptable:w,retain:O},Z=(w?this.intercept:this.invoke).call(this,r,$,i);return this.instrument(Z,Object.assign({},i,{mutate:!0,path:[{__callId__:$.id}]}))}},{key:"intercept",value:function(t,r,a){var i=this,l=this.getState(r.storyId),c=l.chainedCallIds,f=l.isDebugging,u=l.playUntil,s=c.has(r.id);return!f||s||u?(u===r.id&&this.setState(r.storyId,{playUntil:void 0}),this.invoke(t,r,a)):new Promise(function(d){i.setState(r.storyId,function(S){var v=S.resolvers;return{isLocked:!1,resolvers:Object.assign({},v,U({},r.id,d))}})}).then(function(){return i.setState(r.storyId,function(d){var S=d.resolvers,v=r.id;S[v];var o=yt(S,[v].map(Ot));return{isLocked:!0,resolvers:o}}),i.invoke(t,r,a)})}},{key:"invoke",value:function(t,r,a){var i=this,l=this.getState(r.storyId),c=l.callRefsByResult,f=l.forwardedException,u=l.renderPhase,s=Object.assign({},r,{args:r.args.map(function(o){if(c.has(o))return c.get(o);if(o instanceof y.window.HTMLElement){var h=o.prefix,_=o.localName,E=o.id,R=o.classList,I=o.innerText,O=Array.from(R);return{__element__:{prefix:h,localName:_,id:E,classNames:O,innerText:I}}}return o})});r.path.forEach(function(o){o!=null&&o.__callId__&&i.setState(r.storyId,function(h){var _=h.chainedCallIds;return{chainedCallIds:new Set(Array.from(_).concat(o.__callId__))}})});var d=function(h){if(h instanceof Error){var _=h.name,E=h.message,R=h.stack,I={name:_,message:E,stack:R};if(i.update(Object.assign({},s,{status:T.ERROR,exception:I})),i.setState(r.storyId,function(O){return{callRefsByResult:new Map([].concat(D(Array.from(O.callRefsByResult.entries())),[[h,{__callId__:r.id,retain:r.retain}]]))}}),r.interceptable&&h!==F)throw _t;return i.setState(r.storyId,{forwardedException:h}),h}throw h};try{if(f)throw this.setState(r.storyId,{forwardedException:void 0}),f;if(u==="played"&&!r.retain)throw F;var S=a.getArgs?a.getArgs(r,this.getState(r.storyId)):r.args,v=t.apply(void 0,D(S.map(function(o){return typeof o!="function"||Object.keys(o).length?o:function(){var h=i.getState(r.storyId),_=h.cursor,E=h.parentId;i.setState(r.storyId,{cursor:0,parentId:r.id});var R=function(){return i.setState(r.storyId,{cursor:_,parentId:E})},I=o.apply(void 0,arguments);return I instanceof Promise?I.then(R,R):R(),I}})));return v&&["object","function","symbol"].includes(N(v))&&this.setState(r.storyId,function(o){return{callRefsByResult:new Map([].concat(D(Array.from(o.callRefsByResult.entries())),[[v,{__callId__:r.id,retain:r.retain}]]))}}),this.update(Object.assign({},s,{status:v instanceof Promise?T.ACTIVE:T.DONE})),v instanceof Promise?v.then(function(o){return i.update(Object.assign({},s,{status:T.DONE})),o},d):v}catch(o){return d(o)}}},{key:"update",value:function(t){var r=this;clearTimeout(this.getState(t.storyId).syncTimeout),this.channel.emit(b.CALL,t),this.setState(t.storyId,function(a){var i=a.calls,l=i.concat(t).reduce(function(c,f){return Object.assign(c,U({},f.id,f))},{});return{calls:Object.values(l).sort(function(c,f){return c.id.localeCompare(f.id,void 0,{numeric:!0})}),syncTimeout:setTimeout(function(){return r.sync(t.storyId)},0)}})}},{key:"sync",value:function(t){var r=this.getState(t),a=r.isLocked,i=r.isPlaying,l=this.getLog(t),c=l.some(function(s){return s.status===T.ACTIVE});if(J||a||c||l.length===0){this.channel.emit(b.SYNC,{controlStates:V,logItems:l});return}var f=l.some(function(s){return[T.DONE,T.ERROR].includes(s.status)}),u={debugger:!0,start:f,back:f,goto:!0,next:i,end:i};this.channel.emit(b.SYNC,{controlStates:u,logItems:l})}}]),n}();function Yt(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};try{if(y.window.parent===y.window)return n;y.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__||(y.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__=new Ut);var t=y.window.__STORYBOOK_ADDON_INTERACTIONS_INSTRUMENTER__;return t.instrument(n,e)}catch(r){return p.warn(r),n}}export{Yt as i};
//# sourceMappingURL=instrumenter.a58ba764.js.map
